!function(a,b){"use strict";var c={duration:.3*b.Timer.SECOND,ease:b.Easing.Exponential.InOut,properties:{alpha:0}};b.Plugin.StateTransition=function(a,c){b.Plugin.call(this,a,c)},b.Plugin.StateTransition.prototype=Object.create(b.Plugin.prototype),b.Plugin.StateTransition.prototype.constructor=b.Plugin.StateTransition,b.Plugin.StateTransition.prototype.settings=function(a){if(!a)return Object.create(c);for(var b in a)c[b]&&(c[b]=a[b])},b.Plugin.StateTransition.prototype.to=function(){var a=arguments[0];if(this.game.paused=!0,this._cover&&this._cover.destroy(),this._texture=new b.RenderTexture(this.game,this.game.width,this.game.height,"cover"),this._texture.renderXY(this.game.world,-this.game.camera.x,-this.game.camera.y),a){var c=this.game.state.states[a].create,d=this;this._cover=new b.Sprite(this.game,0,0,this._texture),this._cover.fixedToCamera=!0,this._cover.anchor.setTo(.5,.5),this._cover.cameraOffset.x=this.game.width/2,this._cover.cameraOffset.y=this.game.height/2,this.game.state.states[a].create=function(){c.call(d.game.state.states[a]),d.game.add.existing(d._cover),d._animateCover()},this.game.state.start.apply(this.game.state,arguments)}this.game.paused=!1},b.Plugin.StateTransition.prototype.bringToTop=function(){this._cover&&this._cover.bringToTop()},b.Plugin.StateTransition.prototype._animateCover=function(){if(c&&c.properties){for(var a in c.properties)if("object"!=typeof c.properties[a]){var b={};b[a]=c.properties[a],this._tween=this.game.add.tween(this._cover).to(b,c.duration,c.ease,!0)}else this._tween=this.game.add.tween(this._cover[a]).to(c.properties[a],c.duration,c.ease,!0);this._tween.onComplete.addOnce(this._destroy,this)}},b.Plugin.StateTransition.prototype._destroy=function(){this._cover&&this._cover.destroy(),this._texture&&this._texture.destroy()}}(window,Phaser);