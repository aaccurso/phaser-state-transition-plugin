!function(a,b){"use strict";var c={duration:.3*b.Timer.SECOND,ease:b.Easing.Exponential.InOut,properties:{alpha:0}};b.Plugin.StateTransition=function(a,c){b.Plugin.call(this,a,c)},b.Plugin.StateTransition.prototype=Object.create(b.Plugin.prototype),b.Plugin.StateTransition.prototype.constructor=b.Plugin.StateTransition,b.Plugin.StateTransition.prototype.settings=function(a){if(!a)return Object.create(c);for(var b in a)c[b]&&(c[b]=a[b])},b.Plugin.StateTransition.prototype.to=function(){var a,c=arguments[0],d=this;if(!c)throw"No state passed.";this._destroy(),a=this.game.state.states[c].create,this.game.paused=!0,this._texture=new b.RenderTexture(this.game,this.game.width,this.game.height,"cover"),this._texture.renderXY(this.game.world,-this.game.camera.x,-this.game.camera.y),this._cover=new b.Sprite(this.game,0,0,this._texture),this._cover.fixedToCamera=!0,this._cover.anchor.set(.5),this._cover.cameraOffset.x=this.game.width/2,this._cover.cameraOffset.y=this.game.height/2,this.game.state.states[c].create=function(){a.call(d.game.state.states[c]),d.game.add.existing(d._cover),d._animateCover()},this.game.state.start.apply(this.game.state,arguments),this.game.paused=!1},b.Plugin.StateTransition.prototype.bringToTop=function(){this._cover&&this._cover.bringToTop()},b.Plugin.StateTransition.prototype._animateCover=function(){var a,b,d;for(b in c.properties)"object"!=typeof c.properties[b]?(a={},a[b]=c.properties[b],d=this.game.add.tween(this._cover).to(a,c.duration,c.ease,!0)):d=this.game.add.tween(this._cover[b]).to(c.properties[b],c.duration,c.ease,!0);d.onComplete.addOnce(this._destroy,this)},b.Plugin.StateTransition.prototype._destroy=function(){this._cover&&this._cover.destroy(),this._texture&&this._texture.destroy()}}(window,Phaser);